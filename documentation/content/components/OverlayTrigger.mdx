import Button from '@react/react-spectrum/Button';
import Popover from '@react/react-spectrum/Popover';
import OverlayTrigger from '@react/react-spectrum/OverlayTrigger';
import Tooltip from '@react/react-spectrum/Tooltip';

## Overview

An overlay trigger.

## Example

<OverlayTrigger trigger="click" placement="right">
  <Button label="Click" variant="primary" aria-haspopup="dialog" />
  <Popover title="Popover title" variant="default">
    Popover content goes here...
  </Popover>
</OverlayTrigger>

```jsx
<OverlayTrigger trigger="click" placement="right">
  <Button label="Click" variant="primary" />
  <Popover title="Popover title" variant="default">
    Popover content goes here...
  </Popover>
</OverlayTrigger>
```

### Hover/Focus trigger (default)

By default, the overlay will expand on either hover or focus.

<OverlayTrigger placement="right">
  <Button label="Hover/Focus" variant="primary" />
  <Popover title="Popover title" variant="default">
    Popover content goes here...
  </Popover>
</OverlayTrigger>

```jsx
<OverlayTrigger placement="right">
  <Button label="Hover/Focus" variant="primary" />
  <Popover title="Popover title" variant="default">
    Popover content goes here...
  </Popover>
</OverlayTrigger>
```

### Hover trigger

<OverlayTrigger trigger="hover" placement="right">
  <Button label="Hover" variant="primary" />
  <Popover title="Popover title" variant="default">
    Popover content goes here...
  </Popover>
</OverlayTrigger>

```jsx
<OverlayTrigger trigger="hover" placement="right">
  <Button label="Hover" variant="primary" />
  <Popover title="Popover title" variant="default">
    Popover content goes here...
  </Popover>
</OverlayTrigger>
```

## Accessibility

Accessibility for the OverlayTrigger depends on the context with which it is used, the type of overlay it displays, and the event or events that trigger display.

Relevant [WAI-ARIA Authoring Practices 1.1 Design Patterns](https://www.w3.org/TR/wai-aria-practices-1.1/#aria_ex) for components that use OverlayTrigger include:
- [Combo Box](https://www.w3.org/TR/wai-aria-practices-1.1/#combobox)
- [Listbox](https://www.w3.org/TR/wai-aria-practices-1.1/#Listbox)
- [Menu or Menu bar](https://www.w3.org/TR/wai-aria-practices-1.1/#menu)
- [Menu Button](https://www.w3.org/TR/wai-aria-practices-1.1/#menubutton)
- [Tooltip Widget](https://www.w3.org/TR/wai-aria-practices-1.1/#tooltip)

For example, in cases where the OverlayTrigger expands a [Popover](/components/Popover) on click, the Popover or one of its descendants will usually receive focus, and keyboard focus will typically be trapped within the expanded Popover.
When the Popover closes, OverlayTrigger restores focus to the last element that had focus before the Popover closes.
However, when the OverlayTrigger controlling the Popover is triggered on hover or focus,
the OverlayTrigger will set the Popover's `trapFocus` prop to `false` so that the hover or focus event does not shift focus to the Popover unexpectedly.

### Tooltips

When the OverlayTrigger opens an element with `role` equal to `tooltip`, an appropriate `aria-describedby` attribute will be added to the trigger element.

#### Tooltip

<OverlayTrigger placement="right">
  <Button label="Tooltip" />
  <Tooltip>
    Displays a tooltip
  </Tooltip>
</OverlayTrigger>

```jsx
<OverlayTrigger placement="right">
  <Button label="Tooltip" />
  <Tooltip>
    Displays a tooltip
  </Tooltip>
</OverlayTrigger>
```

#### Popover with role='tooltip'

<OverlayTrigger placement="right">
  <Button label="Popover as tooltip" />
  <Popover role="tooltip" title="Popover as tooltip" variant="default">
    Popover content goes here...
  </Popover>
</OverlayTrigger>

```jsx
<OverlayTrigger placement="right">
  <Button label="Popover as tooltip" />
  <Popover role="tooltip" title="Popover as tooltip" variant="default">
    Popover content goes here...
  </Popover>
</OverlayTrigger>
```

### Using aria-haspopup

Components using OverlayTrigger to display a menu or dialog, like [Datepicker](/components/Datepicker), [Dropdown](/components/Dropdown), [DropdownButton](/components/DropdownButton), [Select](/components/Select), and [SplitButton](/components/SplitButton), add the [`aria-haspopup`](https://www.w3.org/TR/wai-aria-1.1/#aria-haspopup) prop to the trigger child element to alert assistive technology users that activating the element will open a popup.

<OverlayTrigger trigger="click" placement="right">
  <Button label="Click" variant="primary" aria-haspopup="dialog" />
  <Popover role="dialog" title="Popover title" variant="default">
    Popover content goes here...
  </Popover>
</OverlayTrigger>

```jsx
<OverlayTrigger trigger="click" placement="right">
  <Button label="Click" variant="primary" aria-haspopup="dialog" />
  <Popover role="dialog" title="Popover title" variant="default">
    Popover content goes here...
  </Popover>
</OverlayTrigger>
```
